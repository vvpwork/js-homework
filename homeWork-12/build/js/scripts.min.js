"use strict";var APP_KEY="5b93d8100e62278344b8abff221294244b92ecbf5b0bd",refs={form:document.querySelector(".form"),input:document.querySelector(".form__input"),list:document.querySelector(".url__list"),urlPreview:"http://api.linkpreview.net"},tempArr=[],url=[],urlTest=/\b(?:(?:https?|ftp|http):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i;function hendlerSubmit(e){e.target;var t=refs.input.value;return url.includes(t)?alert("такая закладка уже существует"):urlTest.test(t)?(url.push(t),past(tamplete(url)),void console.log(tempArr)):alert("не вверный ввод урла")}function preview(e){return fetch(refs.urlPreview+"/?key="+APP_KEY+"&q="+e).then(function(e){if(e.ok)return e.json();throw new Error("error:"+e.statusText)})}function tamplete(e){var t=[];return e.map(function(e){preview(e).then(function(e){return t.push(e)}).catch(function(e){return console.log(e)})}),t}function past(e){e.reduce(function(e,t){return t.title},"")}refs.form.addEventListener("submit",hendlerSubmit);